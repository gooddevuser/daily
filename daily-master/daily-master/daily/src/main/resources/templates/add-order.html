<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
 
<head>
    <head th:include="head :: head"> </head>
</head>

<body>
    <!-- ============================================================== -->
    <!-- main wrapper -->
    <!-- ============================================================== -->
    <div class="dashboard-main-wrapper">
        <!-- ============================================================== -->
        <!-- navbar -->
        <!-- ============================================================== -->
        <header th:include="header :: header"> </header>
        <!-- ============================================================== -->
        <!-- end navbar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- left sidebar -->
        <!-- ============================================================== -->
        <sidebar th:include="sidebar :: sidebar"> </sidebar>
        <!-- ============================================================== -->
        <!-- end left sidebar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- wrapper  -->
        <!-- ============================================================== -->
        <div class="dashboard-wrapper">
            <div class="dashboard-ecommerce">
                <div class="container-fluid dashboard-content ">
                    <div class="row">
                        <div class="offset-xl-2 col-xl-8 col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="card">
                                        <div class="card-header">
                                            <h4 class="mb-0" style="font-size: 30px; letter-spcaing: -1px; text-align: center; color: black;">배송주소</h4>
                                        </div>
                                        <div class="card-body">
                                    <form id="add-order" data-parsley-validate="" novalidate="" method="post">
                                    <input type="hidden" name="uno" th:if="${session.loginuser != null}" th:value="${session.loginuser.uno}">
                                    <input type="hidden" name="ono" th:if="${session.loginuser != null}" th:value="${session.loginuser.uno}">
                                    <input type="hidden" name="oactive" th:if="${session.loginuser != null}" th:value="1">
                                    
                                        <div class="form-group row">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">이름</label>
                                            <div class="col-12 col-sm-8">
                                                <input readonly="readonly" id="uname" name="uname" th:if="${session.loginuser != null}" th:value="${session.loginuser.uname}" type="text" required="" placeholder="이름 필수" class="form-control">
                                                <input id="uname" name="uname" th:if="${session.loginuser == null}" type="text" required="" placeholder="이름 필수" class="form-control">
                                            </div>
                                        </div>                                          
                                        <div class="form-group row">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">이메일</label>
                                            <div class="col-12 col-sm-8">
                                                <input readonly="readonly" id="email" name="email" th:if="${session.loginuser != null}" th:value="${session.loginuser.email}" type="email" required="" data-parsley-type="email" placeholder="이메일 123@co.kr" class="form-control">
                                                <input id="email" name="email" th:if="${session.loginuser == null}" type="email" required="" data-parsley-type="email" placeholder="이메일 123@co.kr" class="form-control">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">전화번호</label>
                                            <div class="col-12 col-sm-8">
                                                <input readonly="readonly" id="tel" name="tel" th:if="${session.loginuser != null}" th:value="${session.loginuser.tel}" data-parsley-type="number" type="text" required="" placeholder="숫자만 입력" class="form-control">
                                                <input id="tel" name="tel" th:if="${session.loginuser == null}" data-parsley-type="number" type="text" required="" placeholder="숫자만 입력" class="form-control">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">주문시 요청사항</label>
                                            <div class="col-12 col-sm-8">
                                                <textarea id="tel" name="content" required="" class="form-control"></textarea>
                                            </div>
                                        </div>                                                   
                                        <div class="form-group row">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">우편번호</label>
                                            <div class="col-12 col-sm-8">
                                                <input readonly="readonly" name="zip" th:if="${session.loginuser != null}" th:value="${session.loginuser.zip}" data-parsley-type="number" type="text" required="" placeholder="숫자만 입력" class="form-control">
                                                <input name="zip" th:if="${session.loginuser == null}" data-parsley-type="number" type="text" required="" placeholder="숫자만 입력" class="form-control">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">일반주소</label>
                                            <div class="col-12 col-sm-8">
                                                <input readonly="readonly" name="address1" th:if="${session.loginuser != null}" th:value="${session.loginuser.address1}" type="text" required="" placeholder="이름 필수" class="form-control">
                                                <input name="address1" th:if="${session.loginuser == null}" type="text" required="" placeholder="이름 필수" class="form-control">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">상세주소</label>
                                            <div class="col-12 col-sm-8">
                                                <textarea readonly="readonly" name="address2" th:if="${session.loginuser != null}" th:value="${session.loginuser.address2}" th:text="${session.loginuser.address2}" required="" class="form-control"></textarea>
                                                <textarea name="address2" th:if="${session.loginuser == null}" required="" class="form-control"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group row cardn">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">카드번호</label>
                                            <div class="col-12 col-sm-8">
                                                <input name="cardnumber" data-parsley-type="number" type="text" required="" placeholder="카드 번호" class="form-control">
                                            </div>
                                        </div>                  
                                        <div class="form-group row cardn">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">카드이름</label>
                                            <div class="col-12 col-sm-8">
                                                <input name="cardname" type="text" required="" data-parsley-minlength="3" placeholder="카드 이름" class="form-control">
                                            </div>
                                        </div>  
                                        <div class="form-group row cardn">
                                            <label class="col-12 col-sm-3 col-form-label text-sm-right">만료날짜</label>
                                            <div class="col-12 col-sm-8">
                                                <input name="carddate" type="text" required="" data-parsley-length="[8,8]" placeholder="8숫자 입력" class="form-control">
                                            </div>
                                        </div>
                                        <hr class="mb-4">
                                        <button class="btn btn-primary btn-lg btn-block" type="submit" th:if="${totalprice != null} and ${finalprice != null}" th:text="${totalprice}+원 + ' + ' + 배송비 +' 3,000'+ 원 + ' = ' + ${finalprice} + '원 결제하기'"></button>     
                                    </form>                                                                    
                                </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <h4 class="d-flex justify-content-between align-items-center mb-0">
                                                        <span class="text-muted" style="font-size: 30px; letter-spcaing: -1px; text-align: center; color: black !important;">장바구니</span>
                                          <span class="badge badge-secondary badge-pill">3</span>
                                                 </h4>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-group mb-3"> 
                                            	<div th:if="${ #lists.size(orders) } > 0" th:each="order : ${ orders }">                                           
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <div>
                                                        <h6 class="my-0" style="font-size:14px;" th:if="${session.loginuser != null}" th:text="${order.pname}" ></h6>
                                                        <small class="text-muted" th:if="${session.loginuser != null}" th:text="${order.content1} + ' 갯수 :'+ ${order.quantity}+개" ></small><br>
                                                        <small class="text-muted" th:if="${session.loginuser != null}" th:text="' 색상 : ' + ${order.color} + '│ 사이즈 : '+ ${order.size}" ></small>
                                                    </div>
                                                    <span class="text-muted" th:if="${session.loginuser != null}" th:text="${order.saleprice}+ ' '+원" ></span><a th:href="@{delete-order(ono=${order.ono})}"><i class="fas fa-times"></i></a>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>금액</span>
                                                    <strong class="text-muted" th:if="${session.loginuser != null}" th:text="${order.saleprice}*${order.quantity}+ ' '+원"></strong>
                                                </li>                                                
                                                </div>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>총 토탈 금액</span>
                                                    <strong class="text-muted" th:if="${session.loginuser != null}" th:text="${totalprice}+ ' '+원"></strong>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between bg-light">
                                                    <div class="text-success">
                                                        <h6 class="my-0" style="font-size:14px;">쿠폰 코드(작업중)</h6>
                                                        <small>QWD23125</small>
                                                    </div>
                                                    <span class="text-success">-5,500 원</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between bg-light">
                                                    <div class="text-success">
                                                        <h6 class="my-0" style="font-size:14px;">포인트 코드(작업중)</h6>
                                                        <small>QWD23125</small>
                                                    </div>
                                                    <span class="text-success">-5,500 원</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>결제예정금액 (작업중)</span>
                                                    <strong>20,000 원</strong>
                                                </li>
                                            </ul>
                                            <form>
                                            	<button type="submit" class="btn btn-secondary" style="width:100%; font-size: 20px;" onclick="location.href=all-products">상품 더 보러가기</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>                    
                </div>
                <!-- ============================================================== -->
                <!-- footer -->
                <!-- ============================================================== -->
                <div class="footer">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                                Copyright © 2018 Concept. All rights reserved. Dashboard by <a href="https://colorlib.com/wp/">Colorlib</a>.
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="text-md-right footer-links d-none d-sm-block">
                                    <a href="javascript: void(0);">About</a>
                                    <a href="javascript: void(0);">Support</a>
                                    <a href="javascript: void(0);">Contact Us</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- end footer -->
                <!-- ============================================================== -->
            </div>
            <!-- ============================================================== -->
            <!-- end wrapper  -->
            <!-- ============================================================== -->
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- end main wrapper  -->
    <!-- ============================================================== -->
    <!-- Optional JavaScript -->
    <!-- ============================================================== -->
    <!-- end main wrapper -->
    <!-- ============================================================== -->
    <!-- Optional JavaScript -->
    <script src="../assets/vendor/jquery/jquery-3.3.1.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <script src="../assets/vendor/slimscroll/jquery.slimscroll.js"></script>
    <script src="../assets/vendor/parsley/parsley.js"></script>
    <script src="../assets/libs/js/main-js.js"></script>
    <script src="../assets/vendor/datepicker/datepicker.js"></script>
    <script src="../assets/vendor/datepicker/moment.js"></script>
    <script src="../assets/vendor/datepicker/tempusdominus-bootstrap-4.js"></script>
    <script>
    $('#form').parsley();
    </script>
    <script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
    </script>
    
    <script type="text/javascript">
	$(document).ready(function(){
	    // 라디오버튼 클릭시 이벤트 발생    
	    $("input:radio[name=paymentMethod1]").click(function(){
	 
	        if ($("input[name=paymentMethod1]:checked").val() == "무통장입금"){
	        	$('.cardn').hide();
	    		$('.carda').show();
	    		
	        } else ($("input[name=paymentMethod1]:checked").val() == "카드결제"){
	        	$('.cardn').show();
	    		$('.carda').hide();
	        }       
	        
	    });		    
	});
	</script>
</body> 
</html>